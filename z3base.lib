;****************************************************************
;*								*
;*  Z3BASE.LIB -- BASE ADDRESSES FOR ZCPR3 SYSTEM ON SB180      *
;*	     SINGLE BOARD COMPUTER BY MICROMINT			*
;*								*
;*  TIM011 MODIFICATIONS RECONSTRUCTED BY MARKO SOLAJIC IN 2023	*
;*								*
;*								*
;* MEMORY MAP OF SYSTEM:					*
;*								*
;*	ADDRESS RANGE	  SIZE	FUNCTION			*
;*	-------------	------- --------			*
;*	    0 -   FF	256 B	STANDARD CP/M BUFFERS		*
;*	  100 - BBFF	 ~47  K TPA				*
;*	 B900 - C0FF	   2  K ZCPR3 COMMAND PROCESSOR 	*
;*	 C100 - C0FF	   3.5K ZRDOS1 OPERATING SYSTEM		*
;*	 CF00 - E7FF	   6.25K BIOS (VER 3.2)			*
;*	 E800 - EFFF	        TERMINAL EMULATOR		*
;*	 F000 - F1FF	   0.5K INPUT/OUTPUT PACKAGE		*
;*	 F200 - F9FF	   2.0K RESIDENT COMMAND PACKAGE	*
;*	 FA00 - FBFF	   0.5K FLOW COMMAND PACKAGE		*
;*	 FC00 - FCFF	256 B	MEMORY-BASED NAMED DIRECTORY	*
;*	 FD00 - FD7F	128 B	ZCPR3 SHELL STACK		*
;*	 FD80 - FDCF	 80 B	ZCPR3 MESSAGE BUFFERS		*
;*				BYTE 0:  ERROR FLAG (Z/NZ)	*
;*				BYTE 1:  IF (8 LEVELS)		*
;*				BYTE 2:  IF ACTIVE (8 LEVELS)	*
;*				BYTE 3:  Z3 CMD STATUS		*
;*					00B - NORMAL		*
;*					01B - SHELL		*
;*					10B - ERROR		*
;*				BYTES 4&5: ERROR ADDRESS IF 10B *
;*				BYTE 6: PROGRAM ERROR CODE	*
;*				BYTE 7: ZEX MESSAGE BYTE	*
;*					00B - NORMAL		*
;*					01B - Z3 PROMPT 	*
;*					10B - SUSPEND INTERCEPT *
;*				BYTE 8: ZEX RUNNING FLAG (0=NO) *
;*				BYTES 9-10: ADDRESS OF NEXT	*
;*					CHAR FOR ZEX TO RETURN	*
;*				BYTES 11-12: ADDRESS OF FIRST	*
;*					CHAR IN ZEX MEMORY-	*
;*					BASED FILE BUFFER	*
;*				BYTE 13: SH CONTROL BYTE	*
;*					BIT 0: ENABLE SHCMT	*
;*					BIT 1: ENABLE SHECHO	*
;*					BIT 7: ENABLE SHELL	*
;*						ENTRY WAIT	*
;*				BYTES 14-15: SHELL SCRATCH	*
;*				BYTES 10H-2FH: ERROR CMD	*
;*				BYTES 30H-39H: REGISTERS	*
;*				BYTES 3AH-3FH: RESERVED 	*
;*				BYTES 40H-4FH: USER-DEFINED	*
;*	 FDD0 - FDF3	 36 B	ZCPR3 EXTERNAL FCB		*
;*	 FDF4 - FDFE	 11 B	ZCPR3 EXTERNAL PATH		*
;*	 FDFF		  1 B	ZCPR3 WHEEL BYTE
;*	 FE00 - FEFF	256 B	ENVIRONMENT DESCRIPTORS 	*
;*				BYTES 00H-7FH:	Z3 PARAMETERS	*
;*				BYTES 80H-FFH:	Z3 TERMINAL CAP *
;*	 FF00 - FFCF	208 B	MULTIPLE COMMAND LINE BUFFER	*
;*	 FFD0 - FFFF	 48 B	ZCPR3 EXTERNAL STACK		*
;*								*
;****************************************************************
;*
;*  ZCPR3 BASE EQUATES
;*
FALSE	EQU	0
TRUE	EQU	NOT FALSE
;
I8080	EQU	FALSE
;
MSIZE	EQU	56;53
;
CCP	EQU	[MSIZE-7]*1024
;
BASE	EQU	0
;
DOSVER	EQU	17H		; ZRDOS version number
;
;  3. EXTERNAL PATH
;
;	THE FOLLOWING EQUATES DEFINE THE ADDRESS OF THE ZCPR3 EXTERNAL
; PATH AND THE NUMBER OF TWO-BYTE ELEMENTS CONTAINED IN THIS PATH (MAXIMUM).
; IF THERE IS NO ZCPR3 EXTERNAL PATH, BOTH OF THESE VALUES SHOULD BE SET TO 0.
;
EXPATH	EQU	0FDF4H		; External path
EXPATHS	EQU	5		; 5 2-byte path elements
				; (path size = expaths*2 + 1)
;
;  4. WHEEL BYTE
;
;	THE FOLLOWING EQUATE DEFINES THE ADDRESS OF THE ZCPR3 WHEEL BYTE.
; IF THERE IS NO ZCPR3 WHEEL BYTE, THIS VALUE SHOULD BE SET TO 0.
;
Z3WHL	EQU	0FDFFH		; Wheel byte address

;
;  6. RCP LOCATION
;
;	THE FOLLOWING EQUATES DEFINE THE ADDRESS OF THE ZCPR3 RESIDENT
; COMMAND PACKAGE AND ITS SIZE IN 128-BYTE BLOCKS.  IF THERE IS NO
; ZCPR3 RESIDENT COMMAND PACKAGE, BOTH OF THESE VALUES SHOULD BE 0.
;
RCP	EQU	0F200H		; Resident command package
RCPS	EQU	16		; 16 128-byte blocks (2k bytes)

;
;  7. IOP LOCATION
;
;	THE FOLLOWING EQUATES DEFINE THE ADDRESS OF THE ZCPR3 INPUT/OUTPUT
; PACKAGE AND ITS SIZE IN 128-BYTE BLOCKS.  IF THERE IS NO ZCPR3 INPUT/OUTPUT
; PACKAGE, BOTH OF THESE VALUES SHOULD BE 0.
;
IOP	EQU	0F000H		; Redirectable i/o package
IOPS	EQU	4		; 4 128-byte blocks (0.5k bytes)

;
;  8. FCP LOCATION
;
;	THE FOLLOWING EQUATES DEFINE THE ADDRESS OF THE ZCPR3 FLOW COMMAND
; PACKAGE AND ITS SIZE IN 128-BYTE BLOCKS.  IF THERE IS NO ZCPR3 FLOW COMMAND
; PACKAGE, BOTH OF THESE VALUES SHOULD BE 0.
;
FCP	EQU	0FA00H		; Flow command package
FCPS	EQU	4		; 4 128-byte blocks (0.5k bytes)

;
;  9. ENV LOCATION
;
;	THE FOLLOWING EQUATES DEFINE THE ADDRESS OF THE ZCPR3 ENVIRONMENT
; DESCRIPTOR AND ITS SIZE IN 128-BYTE BLOCKS.  IF THERE IS NO ZCPR3 ENVIRONMENT
; DESCRIPTOR, BOTH OF THESE VALUES SHOULD BE 0.
;
Z3ENV	EQU	0FE00H		; Environment descriptors
Z3ENVS	EQU	2		; Size of environment descriptor in 128-byte blocks

;
; 10. SHELL STACK
;
;	THE FOLLOWING EQUATES DEFINE THE ADDRESS OF THE ZCPR3 SHELL STACK,
; THE NUMBER OF ENTRIES PERMITTED IN THE ZCPR3 SHELL STACK, AND THE SIZE
; OF EACH ENTRY IN THE SHELL STACK IN TERMS OF BYTES.  IF THERE IS NO ZCPR3
; SHELL STACK, ALL THREE VALUES SHOULD BE 0.
;
SHSTK	EQU	0FD00H		; Zcpr3 shell stack
SHSTKS	EQU	4		; Number of shsize-byte shell stack entries
SHSIZE	EQU	32		; Size of a shell stack entry
				; (stack size = shstks * shsize)

;
; 11. ZCPR3 MESSAGES
;
;	THE FOLLOWING EQUATE DEFINES THE ADDRESS OF THE ZCPR3 MESSAGE BUFFER.
; THIS BUFFER IS ALWAYS 80 BYTES LONG.	IF THERE IS NO ZCPR3 MESSAGE BUFFER,
; THIS ADDRESS SHOULD BE 0.
;
Z3MSG	EQU	0FD80H		; Zcpr3 message buffer

;
; 12. EXTERNAL FCB
;
;	THE FOLLOWING EQUATE DEFINES THE ADDRESS OF THE ZCPR3 EXTERNAL FCB.
; THIS BUFFER IS ALWAYS 36 BYTES LONG.	IF THERE IS NO ZCPR3 EXTERNAL FCB,
; THIS ADDRESS SHOULD BE 0.
;
EXTFCB	EQU	0FDD0H		; Zcpr3 external fcb

;
; 13. NAMED DIRECTORY BUFFER
;
;	THE FOLLOWING EQUATES DEFINE THE ADDRESS AND SIZE (IN TERMS OF 18-BYTE
; ENTRIES) OF THE ZCPR3 NAMED DIRECTORY BUFFER.  IF THERE IS NO SUCH BUFFER,
; BOTH OF THESE VALUES SHOULD BE 0.
;
Z3NDIR	EQU	0FC00H		; Zcpr3 named directory area
Z3NDIRS	EQU	14		; 14 18-byte named directory elements permitted
				; (ndir size = z3ndirs*18 + 1 for trailing 0)

;
; 14. COMMAND LINE
;
;	THE FOLLOWING EQUATES DEFINE THE ADDRESS AND SIZE (IN TERMS OF BYTES)
; OF THE ZCPR3 COMMAND LINE BUFFER (FORMERLY CALLED THE MULTIPLE COMMAND LINE
; BUFFER UNDER ZCPR2).	IF THERE IS NO SUCH BUFFER, BOTH OF THESE VALUES SHOULD
; BE 0.
;
Z3CL	EQU	0FF00H		; Zcpr3 command line buffer
Z3CLS	EQU	204		; Size of command line buffer

;
; 15. EXTERNAL STACK
;
;	THE FOLLOWING EQUATE DEFINES THE ADDRESS OF THE ZCPR3 EXTERNAL STACK.
; THIS STACK IS ALWAYS 48 BYTES IN SIZE.  IF THERE IS NO SUCH STACK, THIS
; VALUE SHOULD BE 0.
;
EXTSTK	EQU	0FFD0H		; Zcpr3 external stack

;
; 16. USER EQUATES
;
;	THE FOLLOWING EQUATES ARE AVAILABLE FOR THE IMPLEMENTER'S TARGET
; SYSTEM.  THESE ARE IMPLEMENTATION-DEFINED.
;
;*
;*  END OF ZCPR3 BASE EQUATES
;*
